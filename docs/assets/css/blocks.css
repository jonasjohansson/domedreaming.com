/* Block and page content styles */

.block {
  align-self: start;
  overflow: visible;
  height: 100%;
  min-height: 0;
  z-index: 1;
}

.block.center {
  align-self: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.block:has(img):not(:has(.image-caption)) {
  justify-content: stretch;
  align-items: stretch;
}

.block:has(img):not(:has(.image-caption)) img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 16px;
  cursor: default;
}

.block.center:has(img):not(:has(.image-caption)) {
  justify-content: stretch;
  align-items: stretch;
}

.block:has(.image-caption) {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: stretch;
  overflow: visible;
}

.block:has(.image-caption) img {
  position: relative;
  flex: 1;
  min-height: 0;
  object-fit: cover;
  border-radius: 16px;
  cursor: default;
}

.image-caption {
  position: absolute;
  top: 100%;
  left: 0;
  mix-blend-mode: difference;
  font-size: 12px;
  color: var(--color-text);
  font-weight: var(--font-weight-normal);
  letter-spacing: var(--letter-spacing-normal);
  margin: 0;
  padding: 0;
  opacity: var(--opacity-muted);
  text-align: left;
  flex-shrink: 0;
}

main .block {
  break-inside: avoid;
  page-break-inside: avoid;
}

/* Canvas section (first page-section with canvas) */

.page-section:has(#canvas-container) {
  position: relative;
}

body.dome-mode .page-section:has(#canvas-container) {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: var(--actual-vh);
  z-index: 10000;
  transition: opacity var(--transition-normal);
}

body.dome-mode .page-section:has(#canvas-container) .block {
  opacity: 0;
  transition: opacity var(--transition-normal);
  pointer-events: none;
}

body:not(.dome-mode) .page-section:has(#canvas-container) .block {
  opacity: 1;
  transition: opacity var(--transition-normal);
}

/* Page sections */

.page-section {
  position: relative;
  height: calc(var(--row-height) * var(--grid-rows));
  min-height: calc(var(--row-height) * var(--grid-rows));
  background-color: inherit;
}

main > section.page-section:first-of-type .page-content {
  background-color: inherit;
  line-height: 1.4;
}

main > section.page-section:first-of-type .page-content p {
  line-height: 1.4;
  margin-bottom: calc(var(--font-size-base) * 1.4);
}

@media (max-width: 768px) {
  .page-section:has(.responsive) {
    height: calc(var(--row-height) * 14);
    min-height: calc(var(--row-height) * 14);
  }
}

/* Grid overlay blocks */

.grid-overlay .block {
  position: relative;
  z-index: 100;
  pointer-events: auto;
}

.grid-overlay .block p {
  font-size: var(--font-size-base);
  margin: 0;
  opacity: var(--opacity-muted);
  line-height: var(--line-height-base);
  text-align: center;
}

main > section.page-section:first-of-type .grid-overlay .block p {
  line-height: 1.4;
}

@media (max-width: 768px) {
  .grid-overlay .block p {
    line-height: 1.4;
  }
}

/* Page content */

.page-content {
  position: relative;
  z-index: 1;
  padding: 0;
  display: grid;
  grid-column: 1 / -1;
  width: 100%;
  grid-template-columns: repeat(var(--grid-columns), 1fr);
  grid-auto-rows: var(--row-height);
  column-gap: 0;
  row-gap: 0;
  gap: 0;
}

.page-content.responsive .dashboard-block {
  z-index: 0;
}

.page-content.responsive .block:not(.dashboard-block) {
  position: relative;
  z-index: 2;
}

.page-content .block img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 16px;
  display: block;
  cursor: default;
}

.page-content .block:hover,
.page-content .block.active {
  z-index: 100;
  position: relative;
}

.page-content .section {
  display: block;
  padding-right: var(--quarter-row-height);
  box-sizing: border-box;
}

.page-content h2 {
  font-size: var(--font-size-base);
  margin: 0;
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-base);
}

.page-content p {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  margin: 0;
  margin-bottom: 24px;
}

.page-content p:last-child {
  margin-bottom: 0;
}

@media (max-width: 768px) {
  .page-content p {
    line-height: 1.4;
    margin-bottom: calc(var(--font-size-base) * 1.4);
  }

  .page-content.responsive {
    grid-auto-rows: min-content;
    grid-column: 2 / span 13;
    grid-row-start: 2;
  }

  .page-content.responsive .block.responsive {
    grid-column: 1 / -1;
    grid-row: auto;
    grid-row-start: auto;
    height: auto;
    min-height: 0;
    margin: 0;
  }
}

.page-content.responsive .block.responsive {
  height: auto;
  min-height: calc(var(--row-height) * 10);
}

.page-content p.large,
p.large,
.large {
  font-size: calc(var(--font-size-base) * 1.5) !important;
  line-height: 1.4;
}

@media (max-width: 768px) {
  .page-content p.large,
  p.large,
  .large {
    font-size: calc(var(--font-size-base) * 1.25) !important;
  }
}

.page-content p.small,
p.small,
.small {
  font-size: calc(var(--font-size-base) * 0.875) !important;
  opacity: 0.5;
  line-height: 1.5;
}

.page-section:last-of-type p.small {
  font-size: calc(var(--font-size-base) * 0.75) !important;
}

@media (max-width: 768px) {
  .page-content p.small,
  p.small,
  .small {
    font-size: calc(var(--font-size-base) * 0.8) !important;
    line-height: 1.4;
  }
  .page-section:last-of-type p.small {
    font-size: calc(var(--font-size-base) * 0.7) !important;
  }
}

